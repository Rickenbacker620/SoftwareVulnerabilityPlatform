<template lang="pug">
div.flex.flex-row.space-x-10
    div.w-32
        NSpace(vertical)
            NRadio(:checked="checkedValue === 'annotate'" @change="handleChange" value="annotate" name="tasktype") 标注任务
            NRadio(:checked="checkedValue === 'classify'" @change="handleChange" value="classify" name="tasktype") 分类任务
            NInput(v-model:value="task.name", type="text")
            NInputNumber( v-model:value="task.size" clearable)
            NButton(@click="handleClick") 提交
</template>

<script setup lang="ts">
import { datasetService } from "@/utils/services"
import { NRadio,NInputNumber, useMessage } from "naive-ui"
import { reactive, ref } from "vue"

const message = useMessage()

const checkedValue = ref('annotate')

const task = reactive({
    name: "",
    size: 0,
})

const handleChange = (e) => checkedValue.value = e.target.value

const handleClick = async () => {
    if (task.name === "" || task.size === 0) {
        message.error("格式错误")
        return
    }
    const { data } = await datasetService.makeTask({...task, task_type: checkedValue.value})
    message.success(data.message)
}
</script>
