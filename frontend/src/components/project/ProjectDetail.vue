<template lang="pug">
NLayout(style="top: 64px;" position="absolute" has-sider)
    NLayoutSider(collapse-mode="transform" show-trigger="bar")
        p sider
    NLayoutContent(:native-scrollbar="false")
        div.overflow-auto.mx-10.my-10
            NDataTable(:columns="columns" :data="nono")
</template>

<script setup lang="ts">
import { datasetService } from "@/utils/service";
import { h, onMounted } from "@vue/runtime-core";
import { NButton } from "naive-ui";
import { useRoute, useRouter } from "vue-router";
import mockdataset from "../../utils/cveinfo.json"

const route = useRoute()
const router = useRouter()
const projectId = route.params.id
const nono = mockdataset.RECORDS

const columns = [
    {
        title: 'CVE编号',
        key: 'cve_no',
        width: 150
    },
    {
        title: '发布日期',
        key: 'publisheddate',
        width: 170
    },
    {
        title: '描述',
        key: 'description',
        ellipsis: true,
    },
    {
        title: '操作',
        key: 'actions',
        render(row: any) {
            return h(
                NButton,
                {
                    size: 'small',
                    onClick: () => { router.push('/') }
                },
                { default: 'Send Mail' }
            )
        },
        ellipsis: true,
        width: 150
    }
]
console.log(columns)
// onMounted(async () => {
//     const dataset = (await datasetService.datasetList({ query: { project: 1 } })).data
// })
</script>
