<template lang="pug">
VChart.chart(:option="option" :autoresize="true")
</template>

<script setup>
import { use } from "echarts/core"
import { CanvasRenderer } from "echarts/renderers"
import { BarChart } from "echarts/charts"
import {
    GridComponent,
    TooltipComponent,
    LegendComponent,
DataZoomComponent,
} from "echarts/components"
import VChart from "vue-echarts"
import { ref } from "vue"
use([
    CanvasRenderer,
    BarChart,
    GridComponent,
    TooltipComponent,
    LegendComponent,
    DataZoomComponent
])

const option = ref({
    tooltip: {
        trigger: "axis",
        axisPointer: { type: "shadow" },
    },
    legend: {
        top: "0%",
        left: "20%",
        data: ["漏洞总数", "未知漏洞"],
        itemGap: 5,
        itemWidth: 15,
    },
    xAxis: [
        {
            type: "category",
            boundaryGap: false,
            axisLabel: {
                formatter: "{value}年",
            },
            data: [
                1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997,
                1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007,
                2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017,
                2018, 2019, 2020, 2021, 2022
            ],
        },
    ],
    dataZoom: [
        {
            type: "slider",
            start: 70,
            end: 100,
        },
    ],
    yAxis: [
        {
            axisLabel: {
                formatter: "{value}个",
                align: "center",
            },
        },
    ],
    series: [
        {
            name: "漏洞总数",
            type: "bar",
            data: [
                2, 3, 11, 15, 13, 13, 25, 25, 75, 253, 246, 894, 1020, 1677,
                2161, 1534, 2453, 4937, 6624, 6658, 5847, 5761, 4645, 4142,
                5291, 5195, 7961, 6549, 6721, 15199, 18062, 18823, 19502, 19995, 5867
            ],
        },
        {
            name: "未知漏洞",
            type: "bar",
            data: [
                2, 3, 11, 15, 13, 13, 25, 25, 73, 246, 239, 846, 998, 1631,
                1926, 1277, 2290, 4563, 5740, 4090, 648, 826, 875, 775, 1132,
                1056, 1104, 1294, 1127, 1685, 2020, 2196, 2137, 2142,824
            ],
        },
    ],
})
</script>