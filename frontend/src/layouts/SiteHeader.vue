<template lang="pug">
NLayoutHeader.h-16.flex.items-center.gap-4(bordered)
    div.flex.flex-1.gap-4.m-6(v-if="route.name === 'DatasetDetail'")
        NButton(text @click="gotoList")
            div
                NIcon
                    List
                span.text-xs 返回列表
        NButton(text @click="prevDataset")
            div
                NIcon
                    ArrowLeft
                span.text-xs 上一个
        NButton(text @click="nextDataset")
            div
                NIcon
                    ArrowRight
                span.text-xs 下一个

        div
            NGradientText(type="info" size="small") 现在可以直接点击下面的标签完成标注
            br
            NGradientText(type="warning" size="small") 无效数据及可以直接点击左侧无效按钮
            br
            NGradientText(type="error" size="small") 上一个、下一个按钮可以正常在当前任务列表中导航
        div
            NGradientText(type="info" size="small") 现在标注完成后不用点击已完成，只要有标注就算完成
    div.flex.ml-auto.mr-6.gap-4
        span.text-lg {{ user.username }}
        NButton.text-red-400(v-if="route.name != 'Login'" text @click="logout") 登出
</template>


<script setup lang="ts">
// import { userService } from "@/utils/service";
// import { useStore } from "vuex";
import { ArrowLeft, ArrowRight, List } from "@vicons/carbon"
import { RouterLink, useRoute, useRouter } from "vue-router";
import { computed } from "vue";
import { useUserStore } from "@/stores/user";
import { datasetService, userService } from "@/utils/services";
import _ from "lodash";
import { useDatasetsStore } from "@/stores/datasets";
import { useMessage } from "naive-ui";
import { NGradientText } from "naive-ui";

const user = useUserStore()
const datasetsStore = useDatasetsStore()
const message = useMessage()

const route = useRoute()
const router = useRouter()

const logout = () => {
    user.logout();
    router.push({ name: "Login" })
}

const prevDataset = () => {
    datasetsStore.prev()
    if (datasetsStore.start) {
        message.info("已到达第一条数据集")
    }
}


const nextDataset = () => {
    datasetsStore.next()
    if (datasetsStore.end) {
        message.info("已到达最后一条数据集")
    }
}

const gotoList = () => datasetsStore.toPrevPage()

</script>

<style scoped>
button.n-button > span > div {
    @apply flex;
    @apply flex-col;
    @apply items-center;
}

.n-icon {
    @apply text-4xl;
}
</style>