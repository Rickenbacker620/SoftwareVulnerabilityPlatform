from pymongo import MongoClient


def get_database():
    # Provide the mongodb atlas url to connect python to mongodb using pymongo
    CONNECTION_STRING = "mongodb://localhost"

    # Create a connection using MongoClient. You can import MongoClient or use pymongo.MongoClient
    client = MongoClient(CONNECTION_STRING)

    # Create the database for our example (we will use the same database throughout the tutorial
    return client["svp2"]


if __name__ == "__main__":
    db = get_database()
    collection = db["datasets"]
    collection.update_many({"annotation": {"$exists": True}}, {"$set": {"annotation.invalid": False}})

    # with open('/home/shiro/Projects/SoftwareVulnerabilityPlatform/backend/data/annotationreborn2.csv') as f:
    #     f_csv = csv.DictReader(f)
    #     for idx, row in enumerate(f_csv):
    #         cve = row['cve_no']
    #         collection

    #         row['role'] = row.pop('name')
    #         row['password'] = row.pop('password_hash')
    #         collection.update_one(
    #             {'username': },
    #             {'$set': row},
    #             upsert=True
    #         )
