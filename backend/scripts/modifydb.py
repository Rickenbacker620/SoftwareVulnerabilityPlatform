from pymongo import MongoClient


def get_database():
    CONNECTION_STRING = "mongodb://47.116.73.52"
    client = MongoClient(CONNECTION_STRING)
    return client["svp"]


if __name__ == "__main__":
    db = get_database()
    collection = db["datasets"]
    collection.update_many({"annotation": {"$exists": True}}, {"$set": {"annotation.example": False}})

    # with open('/home/shiro/Projects/SoftwareVulnerabilityPlatform/backend/data/annotationreborn2.csv') as f:
    #     f_csv = csv.DictReader(f)
    #     for idx, row in enumerate(f_csv):
    #         cve = row['cve_no']
    #         collection

    #         row['role'] = row.pop('name')
    #         row['password'] = row.pop('password_hash')
    #         collection.update_one(
    #             {'username': },
    #             {'$set': row},
    #             upsert=True
    #         )
