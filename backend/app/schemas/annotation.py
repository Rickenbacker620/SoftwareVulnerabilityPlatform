from typing import Optional
from tortoise.contrib.pydantic import pydantic_model_creator
from pydantic import BaseModel

from app.models import Annotation, PartCategory, DetailCategory


class AnnotationSchema(BaseModel):
    id: int
    start_offset: int
    end_offset: int
    dataset_id: int
    part_id: int
    detail_id: Optional[int]


class AnnotationCreateSchema(BaseModel):
    start_offset: int
    end_offset: int
    dataset_id: int
    part_id: int
    detail_id: Optional[int]


# AnnotationSchema = pydantic_model_creator(Annotation, name="AnnotationSchema", exclude_readonly=True, exclude=("user_id",))

PartCategorySchema = pydantic_model_creator(
    PartCategory, name="PartCategorySchema", include=("id", "text"))

DetailCategorySchema = pydantic_model_creator(
    DetailCategory, name="DetailCategorySchema", include=("id", "text"))
