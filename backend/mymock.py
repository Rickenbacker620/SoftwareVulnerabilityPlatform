#fmt: off
import os
import shutil

import django
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'core.settings')
django.setup()

REMAKE = 1

if REMAKE == 1:
    shutil.rmtree('api/migrations')
    os.remove('db.sqlite3')
    os.system('python3 manage.py makemigrations api')
    os.system('python3 manage.py migrate')

    from django.contrib.auth import get_user_model
    User = get_user_model()
    User.objects.create_superuser('shiro', 'shiro@email.com', 'lucifer')

from model_bakery import baker
from model_bakery.recipe import Recipe, foreign_key, related, seq
from itertools import cycle
from django.conf import settings

user = ['user1','user2','user3']

role_names = [settings.ROLE_PROJECT_ADMIN, settings.ROLE_ANNOTATOR, settings.ROLE_ANNOTATION_APPROVER]
roles = [Recipe('api.Role',name=role_name).make() for role_name in role_names]
horay = Recipe('api.RoleMapping',user__username=seq('Bobo'),project__name=seq('pjpjp'), role=cycle(roles), _quantity=10)
horay.make()
# print("hello")
