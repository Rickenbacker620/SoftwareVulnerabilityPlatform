from ..models.project import Dataset
from rest_framework import viewsets
from ..serializers.project import DatasetSerializer, ProjectSerializer


class ProjectViewSet(viewsets.ModelViewSet):
    serializer_class = ProjectSerializer
    pagination_class = None

    def get_queryset(self):
        return self.request.user.projects.all()


class DatasetViewSet(viewsets.ModelViewSet):
    serializer_class = DatasetSerializer
    pagination_class = None

    def get_queryset(self):
        project = self.request.query_params.get('project')
        queryset = Dataset.objects.all()
        if project is not None:
            return queryset.filter(project=project)
        return queryset
